key = "69aa0e8c3251428ca0eb7c146a42a47a"
endpoint = "https://al-cs2.cognitiveservices.azure.com/"

from azure.ai.textanalytics import TextAnalyticsClient
from azure.core.credentials import AzureKeyCredential

# Authenticate the client using your key and endpoint 
def authenticate_client():
    ta_credential = AzureKeyCredential(key)
    text_analytics_client = TextAnalyticsClient(
            endpoint=endpoint, 
            credential=ta_credential)
    return text_analytics_client

client = authenticate_client()

# Example method for detecting the language of text
def language_detection_example(client, data):
    try:
        documents = data

        response = client.detect_language(documents = documents, country_hint = "us")

        
        for doc in response:
            print(f"Language for document with ID {doc.id}: {doc.primary_language.name}")
    

    except Exception as e:
        print(f"Encountered exception. {e}")

data = [
    {
      "id": "1",
      "text": "Hello world"
    },
    {
      "id": "2",
      "text": "Bonjour tout le monde"
    },
    {
      "id": "3",
      "text": "La carretera estaba atascada. Había mucho tráfico el día de ayer."
    }
]
   
language_detection_example(client, data)