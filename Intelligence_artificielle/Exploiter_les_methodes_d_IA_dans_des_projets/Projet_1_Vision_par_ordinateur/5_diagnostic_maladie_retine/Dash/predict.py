from dash import dcc, html, callback, Input, Output, State, no_update
import dash_bootstrap_components as dbc
import datetime

def predict():
    return dbc.Card([
        dcc.Upload(
            id='upload-image',
            children=html.Div([
                'Ajoutez votre/vos image(s)',
            ]),
            style={
                'borderStyle': 'dashed',
                'borderRadius': '5px',
                'textAlign': 'center',
                'verticalAlign' : 'baseline',
                'padding' : '1rem'
            },
            className='m-5 fs-3',
            multiple=True
        ),
        dbc.Carousel(
            items=[
                {
                    "key": "1",
                    "src": "",
                    'img_class_name' : 'd-flex m-auto w-80 h-80'
                },
            ],
            controls=True,
            indicators=True,
            variant="",
            ride='carousel',
            id='carousel',
        )
        ],
        className='m-auto mt-5 me-5 ms-5 d-flex',
    )
        

@callback(
    [Output('carousel', 'items'), Output('carousel', 'variant')],
    Input('upload-image', 'contents'),
    State('upload-image', 'filename')
)
def update_output(list_of_contents, list_of_names):
    if list_of_contents is not None:
        items = []
        for i, content in enumerate(list_of_contents):
            items.append(
                {
                    "key": "1",
                    "src": content,
                    "header": list_of_names[i],
                    'img_style' : {
                        "width" : "auto",
                        "max-height" : "30rem",
                        "object-fit": "contain",
                        "marginBottom" : "5rem"
                    }
                }
            )
        return items, 'dark'
    return no_update, no_update