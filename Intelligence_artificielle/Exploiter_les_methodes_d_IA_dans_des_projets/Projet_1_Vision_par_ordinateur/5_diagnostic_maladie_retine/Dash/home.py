from dash import html, dcc, callback, Input, Output, get_asset_url, no_update
import dash_bootstrap_components as dbc

def homepage():
    return dbc.Container([
        dbc.Row([
            dbc.Col([
                dbc.Fade(
                    dbc.Card([
                        dbc.CardHeader(html.H1(
                            children='Détection de dégâts de la rétine avec IA',
                            style={
                                'textAlign': 'center',
                            },
                            id='title'
                        )),
                        dbc.CardBody(
                            dcc.Markdown(
                                """
                                ### Instructions\n
                                ---
                                Allez sur la page [predict](./predict).\n
                                Glissez-déposez une ou plusieurs images au format `.jpeg`.\n
                                Assurez-vous que les images sont liées aux dégâts de la rétine.\n
                                Assurez-vous que les images sont au fromat .jpeg.\n
                                Cliquez sur le bouton pour lancer la détection.\n
                                ---
                                ---
                                [Données](https://data.mendeley.com/datasets/rscbjbr9sj/2)\n
                                [Citation](http://www.cell.com/cell/fulltext/S0092-8674(18)30154-5)
                                """
                            ),
                        )
                    ]),
                    id="welcome-card",
                    is_in=False,
                    style={"transition": "opacity 2000ms ease", "text-align": "center", 'margin' : "10px"},
                    timeout=2000,
                )
            ]),
        ]),
        dcc.Interval(id='interval-component', interval=1000, n_intervals=0)
    ]
    )

@callback(
    [Output("welcome-card", "is_in"), Output("interval-component", "disabled")],
    Input("interval-component", "n_intervals")
)
def fade(n_intervals):
    print(n_intervals)
    if n_intervals > 0:
        return True, True
    else:
        return False, no_update